<app-header></app-header>

<!-- Carousel -->
<div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="https://res.cloudinary.com/itcity-production/image/upload/f_auto,q_auto/v1648794228/page-landing/hqn1b58gl5acybps0gri.jpg" class="d-block w-100" alt="...">
    </div>
    <div class="carousel-item">
      <img src="https://res.cloudinary.com/itcity-production/image/upload/f_png,q_80/v1680669205/page-landing/content/c5t8smndznkipyxts0rq.png" class="d-block w-100" alt="...">
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>

<div class="container mt-5">
  <div class="row">
    <!-- สินค้าหลัก -->
    <div class="col-lg-9 col-md-8">
      <div class="row row-cols-2 row-cols-md-3 row-cols-lg-5 g-2"> <!-- แถวละ 5 การ์ด -->
        <div *ngFor="let product of products" class="col">
          <div class="card h-100" (click)="goToProductDetail(product.ProductId)" style="cursor: pointer; max-width: 200px; max-height: 500px;"> <!-- ความสูง 500px -->
            <img 
              class="card-img-top" 
              [src]="getImageUrl(product.ImageUrl)" 
              alt="{{ product.ProductName }}" 
              (error)="onImageError($event)"  
              style="height: 200px; object-fit: cover;" 
            />
            <div class="card-body p-1 text-center"> <!-- จัดกึ่งกลางข้อความ -->
              <h6 class="card-title" style="font-size: 0.8rem;">{{ product.ProductName }}</h6> <!-- ลดขนาดฟอนต์ -->
              <p style="font-size: 0.7rem; color: #555;">{{ product.Price | currency }}</p> <!-- ลดขนาดฟอนต์ของราคา -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- สินค้าแนะนำ -->
    <div class="col-lg-3 col-md-4">
      <h5 class="fst-italic">สินค้าแนะนำ</h5>
      <ul class="list-unstyled">
        <li *ngFor="let recommended of recommendedProducts">
          <a class="d-flex flex-row gap-2 align-items-center py-2 link-body-emphasis text-decoration-none border-top"
             (click)="goToProductDetail(recommended.ProductId)">
            <img [src]="getImageUrl(recommended.ImageUrl)" alt="{{recommended.ProductName}}" class="bd-placeholder-img" width="60" height="60" (error)="onImageError($event)">
            <div class="col-lg-8">
              <h6 class="mb-0" style="font-size: 0.8rem;">{{recommended.ProductName}}</h6> <!-- ลดขนาดฟอนต์ -->
              <small class="text-body-secondary">{{recommended.Brand}}</small>
            </div>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>
