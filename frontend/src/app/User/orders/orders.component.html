<app-header></app-header>
<div class="orders-container mt-5">
  <h2 class="text-center mb-4">Orders List</h2>

  <table class="table table-bordered table-striped orders-table shadow-sm">
    <thead class="thead-dark">
      <tr>
        <th>Order ID</th>
        <th>Product Name</th>
        <th>Product Image</th>
        <th>Quantity</th>
        <th>Total Amount</th>
        <th>Order Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let order of orders">
        <tr *ngIf="order.OrderStatus !== 'Cancelled'">
          <td>{{ order.OrderId }}</td>
          <td>{{ order.ProductName }}</td>
          <td>
            <img [src]="getImageUrl(order.ProductImage)" alt="Product Image" class="img-fluid" style="width: 50px; height: 70px; object-fit: cover;">
          </td>
          <td>{{ order.Quantity }}</td>
          <td>{{ order.TotalAmount | currency }}</td>
          <td>
            <span [ngClass]="{'text-danger': order.OrderStatus === 'Cancelled', 'text-success': order.OrderStatus === 'Pending'}">
              {{ order.OrderStatus }}
            </span>
          </td>
          <td>
            <button 
              (click)="cancelOrder(order.OrderId)" 
              [disabled]="order.OrderStatus !== 'Pending'"
              class="btn btn-danger btn-sm">
              Cancel
            </button>
          </td>
        </tr>
      </ng-container>
    </tbody>
  </table>

  <h3 class="text-center mt-5">Cancelled Orders</h3>
  <table class="table table-bordered table-striped orders-table shadow-sm">
    <thead class="thead-dark">
      <tr>
        <th>Order ID</th>
        <th>Product Name</th>
        <th>Product Image</th>
        <th>Quantity</th>
        <th>Total Amount</th>
        <th>Order Status</th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let order of orders">
        <tr *ngIf="order.OrderStatus === 'Cancelled'">
          <td>{{ order.OrderId }}</td>
          <td>{{ order.ProductName }}</td>
          <td>
            <img [src]="getImageUrl(order.ProductImage)" alt="Product Image" class="img-fluid" style="width: 50px; height: 70px; object-fit: cover;">
          </td>
          <td>{{ order.Quantity }}</td>
          <td>{{ order.TotalAmount | currency }}</td>
          <td class="text-danger">{{ order.OrderStatus }}</td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
